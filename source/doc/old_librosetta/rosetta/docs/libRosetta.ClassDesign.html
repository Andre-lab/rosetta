<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><!-- InstanceBegin template="/Templates/libRosetta.dwt" codeOutsideHTMLIsLocked="false" -->
<!-- DW6 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!-- InstanceBeginEditable name="doctitle" -->
<title>libRosetta Class Design</title>
<!-- InstanceEndEditable -->
<link rel="stylesheet" href="styles/libRosetta.css" type="text/css">
<style type="text/css">
.comment { color: #339966; font-style: italic; }
.pre { color: #000099; }
.string { color: #009900; }
.char { color: #009900; }
.float { color: #996600; }
.int { color: #999900; }
.bool { color: #000000; font-weight: bold; }
.type { color: #FF6633; }
.flow { color: #FF0000; }
.keyword { color: #990000; }
.operator { color: #663300; font-weight: bold; }
.style2 {font-size: 150%}
</style>
</head>
<body>
<div id="masthead"><h1 class="style2" id="siteName">libRosetta Users Guide</h1></div>
<div id="pagecell1">
	<img alt="" src="images/tl_curve_white.gif" height="6" width="6" id="tl"> <img alt="" src="images/tr_curve_white.gif" height="6" width="6" id="tr">
	<div id="breadCrumb"><a href="libRosetta.html">Home</a><!-- InstanceBeginEditable name="Breadcrumbs" --> <strong>&raquo;</strong> <a href="libRosetta.Using.html">Using</a> <strong>&raquo;</strong><a href="libRosetta.Classes.html"> Classes</a> <strong>&raquo;</strong> Class Design <!-- InstanceEndEditable --></div>
	<div id="pageName"><h2><!-- InstanceBeginEditable name="PageName" -->libRosetta Class Design<!-- InstanceEndEditable --></h2></div>
	<div id="pageNav">
		<div id="sectionLinks">
			<a href="libRosetta.html">Home</a>
			<a href="libRosetta.Intro.html">Introduction</a>
			<a href="libRosetta.Goals.html">Goals</a>
			<a href="libRosetta.Features.html">Features</a>
			<a href="libRosetta.Using.html">Using</a>
			<a href="libRosetta.Extending.html">Extending</a>
			<a href="libRosetta.Migrating.html">Migrating</a>
			<a href="libRosetta.Glossary.html">Glossary</a>
		</div>
		<div class="relatedLinks">
			<h3>Related Links</h3>
			<a href="http://rosettacommons.org">Rosetta Commons</a>
			<a href="http://wiki.rosettacommons.org">Rosetta Wiki</a>
			<a href="http://www.bakerlab.org">Baker Lab</a>
			<a href="http://graylab.jhu.edu">Gray Lab</a>
			<a href="http://kortemmelab.ucsf.edu">Kortemme Lab</a>
			<a href="http://www.unc.edu/kuhlmanpg">Kuhlman Lab</a>
			<a href="http://www.meilerlab.org">Meiler Lab</a>
			<a href="http://www.soe.ucsc.edu/%7Erohl/rohllab.html">Rohl Lab</a>
		</div>
	</div>
	<div id="content"><!-- InstanceBeginEditable name="Body" -->
    <div class="feature">
      <table width="1050" border="0">
        <tr>
          <td width="498" valign="top">libRosetta uses class hierarchies both to capture type relationships and to share code where possible among related types. Even a simple class hierarchy such as shown at right expresses a useful type relationship that lets us write some general functions in terms of the abstract base class that will work correctly on both types of concrete objects.
            <p>At the top of most libRosetta class hierarchies is a very lightweight abstract class with no data members or function bodies that we call an <em>interface</em> class. By writing clients of a hierarchy to an interface class we maximize the decoupling from the details of our class, lowering its maintenance and its compile time.</p>
            <p>When you want to use an interface at the top of the hierarchy and also take advantage of data and implementations that some or all of the concrete classes share you can end up with a hierarchy such as that shown at right where you have some intermediate abstract classes below the interface where the shared content is held. In this example we have some shared content that is independent of the concrete type in the Class_ class and below that a class template, Class_T_, where the template argument passed by the concrete Class1 and Class2 is either themselves or the type of data they hold. Class_T_ can hold the data and implementations that depend on the concrete type: this is a powerful idiom for code sharing (sometimes known as the &quot;Curiously Recurring Template Pattern&quot;) but can look odd if you aren't familiar with it.</p>
            <p>This is used in the Sidechain class hierarchy, also shown at right. We use class names ending in a '_' character for these intermediate abstract classes to indicate that they are internal details that users do not generally need to look at. </p>
            <p>Many of the higher level libRosetta classes are organized as shown below at right with a chain of interface classes that can branch down into multiple class hierarchies. In this example we elaborate on the classes under the Residue interface.</p>
            <p>This design gives us a lot of expressive power while keeping low coupling, but it does require a lot of small class header files that can obscure the relative simplicity of the type relationships. This is why we use a fairly fine-grained directory and namespace organization that separates out a lot of the details into directories named internal and files/classes with trailing '_' character names. </p>
          </td>
          <td width="32" valign="top">&nbsp;</td>
          <td valign="top"><p><img src="images/SimpleClassHierarchy.png" width="336" height="187"></p>
          <p>&nbsp;</p>
          <p><img src="images/DeeperClassHierarchy.png" width="414" height="417"></p>
          <p>&nbsp;</p>
          <p><img src="images/SidechainHierarchy.png" width="328" height="417"></p>
          <p>&nbsp;</p>
          <p><img src="images/ResidueHierarchy.png" width="442" height="417"></p></td>
        </tr>
      </table>
    </div>
  <!-- InstanceEndEditable --></div>
	<div id="siteInfo"><a href="libRosetta.support.html">Support</a> | &copy;2007 Rosetta Commons</div>
</div> 
<br> 
</body>
<!-- InstanceEnd --></html>