<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><!-- InstanceBegin template="/Templates/libRosetta.dwt" codeOutsideHTMLIsLocked="false" -->
<!-- DW6 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!-- InstanceBeginEditable name="doctitle" -->
<title>Common Tasks in  libRosetta</title>
<!-- InstanceEndEditable -->
<link rel="stylesheet" href="styles/libRosetta.css" type="text/css">
<style type="text/css">
.comment { color: #339966; font-style: italic; }
.pre { color: #000099; }
.string { color: #009900; }
.char { color: #009900; }
.float { color: #996600; }
.int { color: #999900; }
.bool { color: #000000; font-weight: bold; }
.type { color: #FF6633; }
.flow { color: #FF0000; }
.keyword { color: #990000; }
.operator { color: #663300; font-weight: bold; }
.style2 {font-size: 150%}
</style>
</head>
<body>
<div id="masthead"><h1 class="style2" id="siteName">libRosetta Users Guide</h1></div>
<div id="pagecell1">
	<img alt="" src="images/tl_curve_white.gif" height="6" width="6" id="tl"> <img alt="" src="images/tr_curve_white.gif" height="6" width="6" id="tr">
	<div id="breadCrumb"><a href="libRosetta.html">Home</a><!-- InstanceBeginEditable name="Breadcrumbs" --> <strong>&raquo;</strong> <a href="libRosetta.Using.html">Using</a> <strong>&raquo;</strong> Common Tasks<!-- InstanceEndEditable --></div>
	<div id="pageName"><h2><!-- InstanceBeginEditable name="PageName" -->Common Tasks <!-- InstanceEndEditable --></h2></div>
	<div id="pageNav">
		<div id="sectionLinks">
			<a href="libRosetta.html">Home</a>
			<a href="libRosetta.Intro.html">Introduction</a>
			<a href="libRosetta.Goals.html">Goals</a>
			<a href="libRosetta.Features.html">Features</a>
			<a href="libRosetta.Using.html">Using</a>
			<a href="libRosetta.Extending.html">Extending</a>
			<a href="libRosetta.Migrating.html">Migrating</a>
			<a href="libRosetta.Glossary.html">Glossary</a>
		</div>
		<div class="relatedLinks">
			<h3>Related Links</h3>
			<a href="http://rosettacommons.org">Rosetta Commons</a>
			<a href="http://wiki.rosettacommons.org">Rosetta Wiki</a>
			<a href="http://www.bakerlab.org">Baker Lab</a>
			<a href="http://graylab.jhu.edu">Gray Lab</a>
			<a href="http://kortemmelab.ucsf.edu">Kortemme Lab</a>
			<a href="http://www.unc.edu/kuhlmanpg">Kuhlman Lab</a>
			<a href="http://www.meilerlab.org">Meiler Lab</a>
			<a href="http://www.soe.ucsc.edu/%7Erohl/rohllab.html">Rohl Lab</a>
		</div>
	</div>
	<div id="content"><!-- InstanceBeginEditable name="Body" -->
    <div class="feature">
      <table border="0">
        <tr>
          <td width="700"><p>Here
    are some examples of performing common tasks in libRosetta. This is intended to give the flavor of libRosetta use but the code does not show the necessary header includes.</p>
            <h4>Read a PDB File</h4>
            <p>To read a Complex of structures from a PDB file </p>
<pre><span class="keyword">   typedef</span>  ProteinBuilder<span class="operator">::</span>Proteins  Proteins<span class="operator">;</span><span class="comment"> // This will become Complex
</span>   Proteins proteins<span class="operator">(</span> read_pdb<span class="operator">(</span> protein_file<span class="operator">.</span>pdb<span class="operator"> ) );</span><span class="comment"> // Collection of proteins
</span>   Protein<span class="operator"> &amp;</span> protein<span class="operator">( **</span>proteins<span class="operator">.</span>begin<span class="operator">() );</span><span class="comment"> // Grab the first protein</span></pre>
<p>Notes:</p>
            <ul>
              <li>The Complex object will replace the simple structure collection returned by the PDB reader/builder. </li>
              <li>The libRosetta PDB reader/builder is used for stand-alone libRosetta tests/demos at this point: the classic Rosetta input_pdb() will continue to handle PDB reading for some period after libRosetta is integrated due to the extra steps it performs after reading a PDB file.</li>
            </ul>            <h4>Loop Over the Residues in a Protein</h4>
            <p>Given:</p>
<pre><span class="keyword">   using namespace</span> rosetta<span class="operator">::</span>conformation<span class="operator">::</span>amino<span class="operator">;</span><span class="keyword">
   using namespace</span> rosetta<span class="operator">::</span>conformation<span class="operator">::</span>protein<span class="operator">;</span>
   Protein<span class="operator"> &amp;</span> protein<span class="operator">(</span><span class="comment"> /* something */</span><span class="operator"> );</span></pre>
            <p>you can loop over the residues by index:</p>
<pre><span class="flow">   for</span><span class="operator"> (</span> Size i<span class="operator"> =</span><span class="int"> 1</span><span class="operator">,</span> e<span class="operator"> =</span> protein<span class="operator">.</span>n_residue<span class="operator">();</span> i<span class="operator"> &lt;=</span> e<span class="operator">; ++</span>i<span class="operator"> ) {</span>
      AminoAcid<span class="operator"> &amp;</span> aa<span class="operator">(</span> protein<span class="operator">[</span> i<span class="operator"> ] );</span><span class="comment">
      // Use AminoAcid aa
</span><span class="operator">   }</span></pre>
</p>or by iterator:
<pre><span class="flow">   for</span><span class="operator"> (</span> Protein<span class="operator">::</span>Iterator i<span class="operator"> =</span> protein<span class="operator">.</span>begin<span class="operator">(),</span> e<span class="operator"> =</span> protein<span class="operator">.</span>end<span class="operator">();</span> i<span class="operator"> !=</span> e<span class="operator">; ++</span>i<span class="operator"> ) {</span>
      AminoAcid<span class="operator"> &amp;</span> aa<span class="operator">( **</span>i<span class="operator"> );</span><span class="comment"> // We dereference twice because containers hold smart pointers
      // Use AminoAcid aa
</span><span class="operator">   }</span></pre>
<p>Note:
  Index and/or iterator access is provided for access to constituents of libRosetta components where appropriate.</p>
<h4>Using Residues</h4>
<p>Here's a sample of some of the calls you can make on a residue:</p>
<pre><span class="keyword">   using namespace</span> rosetta<span class="operator">::</span>conformation<span class="operator">::</span>amino<span class="operator">;</span>
   AminoAcid<span class="operator"> &amp;</span> aa<span class="operator">(</span><span class="comment"> /* something */</span><span class="operator"> );</span>

   aa<span class="operator">.</span>id<span class="operator">();</span><span class="comment"> // Amino acid id string (ALA, ...)
</span>   aa<span class="operator">.</span>identifier<span class="operator">();</span><span class="comment"> // Amino acid name string (Alanine, ...)
</span>   aa<span class="operator">.</span>code<span class="operator">();</span><span class="comment"> // Amino acid code letter (A, ...)
</span>   aa<span class="operator">.</span>n_chi<span class="operator">();</span><span class="comment"> // Number of chi angles
</span>   aa<span class="operator">.</span>centroid<span class="operator">();</span><span class="comment"> // Centroid object
</span>   aa<span class="operator">.</span>is_terminus<span class="operator">();</span><span class="comment"> // Is it a terminus?
</span>   aa<span class="operator">.</span>is_N_terminus<span class="operator">();</span><span class="comment"> // Is it an N-terminus?
</span>   aa<span class="operator">[</span> CA<span class="operator"> ];</span><span class="comment"> // C-alpha atom
</span>   aa<span class="operator">[</span> N_CA_C<span class="operator"> ];</span><span class="comment"> // N-CA-C bond angle
</span>   aa<span class="operator">[</span> Chi3<span class="operator"> ];</span><span class="comment"> // Chi3 torsion angle
</span>   aa<span class="operator">.</span>rotamer_index<span class="operator">(</span><span class="int"> 3</span><span class="operator"> );</span><span class="comment"> // Rotamer index of Chi3
</span>   aa<span class="operator">.</span>packed_rotamer_number<span class="operator">();</span><span class="comment"> // Packed rotamer number
</span>   aa<span class="operator">.</span>refold_sidechain<span class="operator">();</span><span class="comment"> // Refold the sidechain</span></pre><h4></h4>
<h4>Loop Over the Atoms in a Residue</h4>
<p>Given:</p>
<pre><span class="keyword">   using namespace</span> rosetta<span class="operator">::</span>conformation<span class="operator">;</span><span class="keyword">
   using namespace</span> rosetta<span class="operator">::</span>conformation<span class="operator">::</span>amino<span class="operator">;</span>
   AminoAcid<span class="operator"> &amp;</span> aa<span class="operator">(</span><span class="comment"> /* something */</span><span class="operator"> );</span>
</pre>
<p>you can loop over all atoms in the residue by iterator:</p>
<pre><span class="comment">   // Loop over all atoms in the residue
</span><span class="flow">   for</span><span class="operator"> (</span> AminoAcid<span class="operator">::</span>Atoms_Iterator i<span class="operator"> =</span> aa<span class="operator">.</span>atoms_begin<span class="operator">(),</span> e<span class="operator"> =</span> aa<span class="operator">.</span>atoms_end<span class="operator">();</span> i<span class="operator"> !=</span> e<span class="operator">; ++</span>i<span class="operator"> ) {</span>
      Atom<span class="operator"> &amp;</span> atom<span class="operator">( **</span>i<span class="operator"> );</span><span class="comment">
      // Use Atom atom
</span><span class="operator">   }</span></pre>
<p>or just the heavy atoms:</p>
<pre><span class="comment">   // Loop over all heavy atoms in the residue
</span><span class="flow">   for</span><span class="operator"> (</span> AminoAcid<span class="operator">::</span>Atoms_Iterator i<span class="operator"> =</span> aa<span class="operator">.</span>heavy_atoms_begin<span class="operator">(),</span> e<span class="operator"> =</span> aa<span class="operator">.</span>heavy_atoms_end<span class="operator">();</span> i<span class="operator"> !=</span> e<span class="operator">; ++</span>i<span class="operator"> ) {</span>
      Atom<span class="operator"> &amp;</span> atom<span class="operator">( **</span>i<span class="operator"> );</span><span class="comment">
      // Use heavy Atom atom
</span><span class="operator">   }</span></pre>
<p>and you can loop over the atoms by index:</p>
<pre><span class="comment">   // Loop over all atoms by index
</span><span class="flow">   for</span><span class="operator"> (</span> Size i<span class="operator"> =</span><span class="int"> 1</span><span class="operator">,</span> e<span class="operator"> =</span> aa<span class="operator">.</span>n_atom<span class="operator">();</span> i<span class="operator"> &lt;=</span> e<span class="operator">; ++</span>i<span class="operator"> ) {</span>
      Atom<span class="operator"> &amp;</span> atom<span class="operator">(</span> aa<span class="operator">.</span>atom<span class="operator">(</span> i<span class="operator"> ) );</span><span class="comment">
      // Use Atom atom
</span><span class="operator">   }</span></pre>
<h4>Using Atoms</h4>
<pre>   atom<span class="operator">.</span>is_H<span class="operator">()</span>
   atom<span class="operator">.</span>is_heavy<span class="operator">()</span>
   atom<span class="operator">.</span>is_donor<span class="operator">()</span>
   atom<span class="operator">.</span>is_donor_H<span class="operator">()</span>
   atom<span class="operator">.</span>is_acceptor<span class="operator">()</span>
   atom<span class="operator">.</span>lj_radius<span class="operator">()</span>
   atom<span class="operator">.</span>position<span class="operator">()</span><span class="comment">                    // PointPosition == xyzVector
</span>   distance<span class="operator">(</span> atom1<span class="operator">,</span> atom2<span class="operator"> )</span><span class="comment">           // == distance( atom1.position(), atom2.position() )
</span>   distance_squared<span class="operator">(</span> atom1<span class="operator">,</span> atom2<span class="operator"> )</span></pre>
<h4 class="story"></h4>
<h4>Changing a Conformation</h4>
<pre><span class="keyword">   using namespace</span> rosetta<span class="operator">::</span>conformation<span class="operator">::</span>amino<span class="operator">;</span><span class="keyword">
   using namespace</span> rosetta<span class="operator">::</span>conformation<span class="operator">::</span>protein<span class="operator">;</span>
   Protein<span class="operator"> &amp;</span> protein<span class="operator">(</span><span class="comment"> /* something */</span><span class="operator"> );
   ...</span>
   protein<span class="operator">.</span>psi<span class="operator">(</span> i<span class="operator"> ) =</span> angle<span class="operator">;</span>
   protein<span class="operator">.</span>phi<span class="operator">(</span> i<span class="operator"> ) +=</span> delta_angle<span class="operator">;</span>
   aa<span class="operator">[</span> Chi2<span class="operator"> ] =</span> angle<span class="operator">;</span>
   aa<span class="operator">.</span>chi<span class="operator">(</span><span class="int"> 2</span><span class="operator"> ) =</span> angle<span class="operator">;</span><span class="comment"> // Same thing</span></pre>
<p>Note: Internal angles in libRosetta are in radians. Use the numeric::conversions::radians() function to convert degrees values to radians. </p>
<h4>Scoring a Conformation</h4>
<pre>   fullatom_energy<span class="operator">(</span> protein<span class="operator"> );</span></pre>
Additional scoring operations are being added.</td>
        </tr>
      </table>
    </div>
  <!-- InstanceEndEditable --></div>
	<div id="siteInfo"><a href="libRosetta.support.html">Support</a> | &copy;2007 Rosetta Commons</div>
</div> 
<br> 
</body>
<!-- InstanceEnd --></html>