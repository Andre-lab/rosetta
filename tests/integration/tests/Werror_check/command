cd %(workdir)s

echo 'Checking the status of the -Werror option in the Scons build settings:'

if grep -qE '.*#.*"Werror"' ../../../../source/tools/build/basic.settings; then
    echo FAIL
    echo 'Someone has commented OFF -Werror from the Scons build settings.' > log
    echo 'This problem is still not fixed on' $(date)'.' >> log
    # Outputting the timestamp ensures the test will remain broken until fixed.
else
    echo PASS
    echo '-Werror is ON in the Scons build settings.' > log
fi

echo 'Checking the status of the -Werror option in the CMake release build settings:'

if grep -qE '.*#.*COMPILE_FLAGS.*-Werror"[)]' ../../../../source/cmake/build_release/CMakeLists.txt; then
    echo FAIL
    echo 'Someone has commented OFF -Werror from the CMake release build settings.' > log
    echo 'This problem is still not fixed on' $(date)'.' >> log
    # Outputting the timestamp ensures the test will remain broken until fixed.
else
    echo PASS
    echo '-Werror is ON in the CMake release build settings.' > log
fi

echo 'Checking the status of the -Werror option in the CMake debug build settings:'

if grep -qE '.*#.*COMPILE_FLAGS.*-Werror"[)]' ../../../../source/cmake/build_debug/CMakeLists.txt; then
    echo FAIL
    echo 'Someone has commented OFF -Werror from the CMake debug build settings.' > log
    echo 'This problem is still not fixed on' $(date)'.' >> log
    # Outputting the timestamp ensures the test will remain broken until fixed.
else
    echo PASS
    echo '-Werror is ON in the CMake debug build settings.' > log
fi

